# Lighthouse

Простое приложение на Python/Tkinter для управления профилями и туннелями.

## Установка и запуск

1. Убедитесь, что у вас установлен Python 3.
2. Установите зависимости (для данного прототипа внешние зависимости не требуются).
3. Запустите приложение:
   ```bash
   python -m lighthouse_app.ui
   ```

## Сборка в исполняемый файл для Windows

Чтобы получить самостоятельный `.exe` файл, воспользуйтесь стандартным инструментом [PyInstaller](https://pyinstaller.org):

1. Установите PyInstaller:
   ```bash
   pip install pyinstaller
   ```
2. В каталоге проекта выполните:
   ```bash
   pyinstaller --onefile --windowed --name Lighthouse lighthouse_app/ui.py
   ```
3. Готовый `Lighthouse.exe` появится в папке `dist`. Скопируйте рядом файл `config.ini` и при необходимости `pane_layout.ini`.
4. Запустите `Lighthouse.exe` двойным щелчком или через командную строку.

## Тестирование

Тесты используют значения из файла `config.ini` для проверки корректности конфигурации.
Запуск тестов:

```bash
pytest
```

## Структура интерфейса

- **Profiles**: список профилей слева, кнопки *New Profile*, *Edit Profile* и *Delete Profile* снизу.
- **Tunnels**: список туннелей по центру, кнопка *New Tunnel* снизу.
- **Tunnel Info and Status**: информация о текущем туннеле справа сверху.
- **Log**: область логов справа снизу.
- **Settings**: кнопка с настройками внизу справа.
- **Manage SSH Key**: кнопка управления SSH ключами рядом с *Settings*.

Панели можно изменять по ширине перетягиванием разделителей. Минимальный
размер разделителей задаётся параметром `sash_width` в `config.ini`.

Ширина колонок сохраняется между запусками в файле `pane_layout.ini`. Этот
файл предназначен для пользовательских настроек и добавлен в `.gitignore`.

Каждое действие пользователя логируется в файл `app.log` для упрощения отладки.

## Работа с профилями

Профили позволяют сохранять имя пользователя, выделенный IP адрес и путь к SSH
ключу. Пользователь может выбрать автоматическое назначение адреса или
ввести его вручную. При создании нового профиля все параметры вводятся в одном
окне, что упрощает процесс для начинающих пользователей. При автоматическом выборе используется диапазон
`127.1.1.0/24`, адреса в нём не повторяются. Данные профилей хранятся в
файле `profiles.json`, расположенном рядом с программой. Файл добавлен в
`.gitignore`, поэтому его содержимое относится к пользовательским данным.
Профиль можно изменить через кнопку **Edit Profile**, где доступны поля для
редактирования имени, IP адреса и пути к ключу. Удаление профиля выполняется
кнопкой **Delete Profile** или программно, используя функцию
`delete_profile` из модуля `profiles`.
